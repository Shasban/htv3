{% assign navigation = site.data.menu %}
<header class="z-50 relative isolate" x-data="{ currentNav: '', mobileNav: false }">
   <nav class="mx-auto flex max-w-7xl items-center justify-between p-6 lg:px-8" aria-label="Global">
      <div class="flex mr-10">
         <a href="{{site.baseurl}}" class="-m-1.5 p-1.5">
            <span class="sr-only">{{site.title}}</span>
            <img class="h-10 w-auto cursor-pointer" src="{{site.baseurl}}assets/img/{{ site.logo }}" alt="{{site.title}}">
         </a>
      </div>
      <div class="flex lg:hidden">
         <button type="button" @click="mobileNav = !mobileNav"
            class="-m-2.5 inline-flex items-center justify-center rounded-md p-2.5 text-gray-700">
            <span class="sr-only">Open main menu</span>
            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
               aria-hidden="true">
               <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
            </svg>
         </button>
      </div>
      <div class="hidden lg:flex lg:gap-x-10">
         {% for item in navigation %}
         {% if item.subnav.size > 0 %}
         <div x-cloak x-data="{ open: false }"> <!-- Initialize Alpine.js component with 'open' state -->
            <button type="button" class="flex items-center gap-x-1 text-sm font-normal leading-6 text-gray-900"
               @click="open = !open; if (open) { currentNav = 'nav_{{forloop.index}}'; } else { currentNav = ''; }"
               @keydown.escape="open = false" @keydown.tab="open = false" @keydown.shift.tab="open = false"
               :class="{ 'border-indigo-500 text-primary': currentNav === `nav_{{forloop.index}}`, 'border-transparent hover:text-primary': currentNav !== `nav_{{forloop.index}}` }"
               aria-expanded="open">
               {{item.title}}
               <svg class="h-5 w-5 flex-none text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                  <path fill-rule="evenodd"
                     d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
                     clip-rule="evenodd" />
               </svg>
            </button>
            <div x-show="open" x-transition:enter="transition ease-out duration-200"
               x-transition:enter-start="opacity-0 translate-y-1" x-transition:enter-end="opacity-100 translate-y-0"
               x-transition:leave="transition ease-in duration-150" x-transition:leave-start="opacity-100 translate-y-0"
               x-transition:leave-end="opacity-0 translate-y-1"
               x-description="'Individual' flyout menu, show/hide based on flyout menu state." x-ref="panel"
               @click.away="open = false"
               class="absolute inset-x-0 top-0 -z-10 bg-white pt-16 shadow-lg ring-1 ring-gray-900/5 isolate">
               <div class="relative mx-auto max-w-7xl">

                  <!-- Close button -->
                  <div class="absolute right-8 top-5 p-3 cursor-pointer" @click="open = false">
                     <svg xmlns="http://www.w3.org/2000/svg" fill="#aaa" version="1.1" width="15px" height="15px"
                        viewBox="0 0 94.926 94.926">
                        <g>
                           <path d="M55.931,47.463L94.306,9.09c0.826-0.827,0.826-2.167,0-2.994L88.833,0.62C88.436,0.224,87.896,0,87.335,0
                                 c-0.562,0-1.101,0.224-1.498,0.62L47.463,38.994L9.089,0.62c-0.795-0.795-2.202-0.794-2.995,0L0.622,6.096
                                 c-0.827,0.827-0.827,2.167,0,2.994l38.374,38.373L0.622,85.836c-0.827,0.827-0.827,2.167,0,2.994l5.473,5.476
                                 c0.397,0.396,0.936,0.62,1.498,0.62s1.1-0.224,1.497-0.62l38.374-38.374l38.374,38.374c0.397,0.396,0.937,0.62,1.498,0.62
                                 s1.101-0.224,1.498-0.62l5.473-5.476c0.826-0.827,0.826-2.167,0-2.994L55.931,47.463z" />
                        </g>
                     </svg>
                  </div>
                  {% include mesh-bg.html %}
                  <!-- Dropdown content -->
                  <div class="grid grid-cols-1 lg:grid-cols-4 gap-y-5 px-6 pt-20 pb-10 lg:px-8 gap-x-4 xl:gap-x-10"
                     @click.outside="open = false">
                   
                     {% for subitem in item.subnav %}
                     <div class="{{subitem.span_class}} h-full flex">
                        <div class="{{subitem.class}} rounded-lg p-5 flex-grow flex flex-col items-start">
                           {% if subitem.heading %}
                           <h3 class="font-semibold text-xl mb-5">{{ subitem.heading }}</h3>
                           {% endif %}
                           {% if subitem.description %}
                           <p class="font-light text-sm">{{ subitem.description }}</p>
                           {% endif %}
                           {% if subitem.url %}
                           <a class="group inline-flex mt-auto items-center justify-center font-medium rounded-full pb-3 text-sm focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 text-primary hover:text-indigo-900 active:text-primary focus-visible:outline-slate-900"
                              href="{{site.baseurl}}{{subitem.url}}">
                              {{subitem.button_text}} &#8594;
                           </a>
                           {% endif %}
                           {% if subitem.featured_blog %}
                           {% assign post=site.posts[1] %}
                           <a href="{{ post.url | absolute_url }}">
                              <img class="mt-auto rounded-lg" src="{{site.baseurl}}{{post.photo}}"
                                 alt="{{posts.title}}">
                           </a>
                           {% endif %}
                           {% if subitem.image %}
                           <img class="mt-auto rounded-lg" {% if subitem.video %}
                              @click="openVideo = true; videoUrl = '{{subitem.video}}'" {% endif %}
                              src="{{site.baseurl}}{{ subitem.image }}" alt="">
                           {% endif %}
                           {% for link in subitem.links %}
                           <a href="{{site.baseurl}}{{link.url}}"
                              class="block py-1 text-md font-light leading-6 text-dark hover:text-green-500 transition duration-300 ease-in-out w-auto nav_link">
                              {{link.title}}
                           </a>
                           {% endfor %}
                        </div>
                     </div>
                     {% endfor %}
                  </div>
               </div>
            </div>
         </div>
         {% else %}
         <a href="{{site.baseurl}}{{item.url}}"
            class="text-sm font-normal leading-6 text-gray-900 hover:text-primary">{{item.title}}</a>
         {% endif %}
         {% endfor %}
      </div>


      <!-- right side nav -->
      <div class="ml-auto hidden lg:flex justify-center gap-x-2">

         <a class="group inline-flex items-center justify-center py-1 px-4 text-sm focus:outline-none ring-slate-200 text-slate-700 hover:text-slate-900 active:bg-slate-100 active:text-slate-600 focus-visible:outline-blue-600 focus-visible:ring-slate-300"
            variant="outline" href="{{site.baseurl}}contact-us.html">
            Contact Us
         </a>
         <a class="group inline-flex items-center justify-center py-1 px-4 text-sm focus:outline-none ring-slate-200 text-slate-700 hover:text-slate-900 active:bg-slate-100 active:text-slate-600 focus-visible:outline-blue-600 focus-visible:ring-slate-300"
            variant="outline" href="https://happytenant.tech/users/sign_in" target="_blank">
            Admin Login </a>

         <a class="group inline-flex items-center justify-center rounded-full py-2 px-3 text-sm  focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 bg-primary text-white hover:bg-slate-700 hover:text-slate-100 active:bg-slate-800 active:text-slate-300 focus-visible:outline-slate-900"
            variant="solid" color="slate" href="#request-demo">
            {{site.data.shared.request_demo}} </a>
      </div>

   </nav>

   <!-- Mobile menu, show/hide based on menu open state. -->
   <div class="lg:hidden" x-cloak x-show="mobileNav == true" @click.away="mobileNav = false"
      @keydown.escape.stop="mobileNav = false;" role="dialog" aria-modal="true">
      <!-- Background backdrop, show/hide based on slide-over state. -->
      <div class="fixed inset-0 z-10"></div>
      <div
         class="fixed inset-y-0 right-0 z-10 w-full overflow-y-auto bg-white px-6 py-6 sm:max-w-sm sm:ring-1 sm:ring-gray-900/10">
         <div class="flex items-center justify-between">
            <a href="{{site.baseurl}}" class="-m-1.5 p-1.5">
               <span class="sr-only">HappyTenant</span>
               <img class="logo block h-8 w-auto" src="{{site.baseurl}}assets/img/{{ site.logo }}" alt="HappyTenant">
            </a>
            <button type="button" @click="mobileNav = false" class="-m-2.5 rounded-md p-2.5 text-gray-700">
               <span class="sr-only">Close menu</span>
               <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                  aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
               </svg>
            </button>
         </div>
         <div class="mt-6 flow-root">
            <div class="-my-6 divide-y divide-gray-500/10">
               <div class="space-y-2 py-6">
                  {% for item in navigation %}
                  {% if item.subnav.size > 0 %}
                  <div x-data="{ open: false }">
                     <button @click="open = !open"
                        class="flex w-full items-center justify-between rounded-lg py-2 pl-3 pr-3.5 text-base font-medium leading-7 text-gray-900 hover:bg-gray-400/10">
                        {{item.title}}
                        <svg class="h-5 w-5 flex-none" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                           <path fill-rule="evenodd"
                              d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
                              clip-rule="evenodd" />
                        </svg>
                     </button>
                     <div class="mt-2 space-y-2" x-show="open" x-cloak>
                        {% for subitem in item.subnav %}
                        <div>
                           <a href="{{site.baseurl}}{{subitem.url}}"
                              class="block rounded-lg py-2 pl-6 pr-3 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50">{{subitem.heading}}</a>
                           {% if subitem.links %}
                           <div class="ml-4 pl-2 space-y-1">
                              {% for link in subitem.links %}
                              <a href="{{site.baseurl}}{{link.url}}"
                                 class="block rounded-lg py-1 pl-6 pr-3 text-sm font-light leading-6 text-gray-900 hover:bg-gray-50">{{link.title}}</a>
                              {% endfor %}
                           </div>
                           {% endif %}
                        </div>
                        {% endfor %}
                     </div>
                  </div>
                  {% else %}
                  <a href="{{site.baseurl}}{{item.url}}"
                     class="-mx-3 block rounded-lg py-2 px-3 text-base font-normal leading-7 text-gray-900 hover:bg-gray-400/10">{{item.title}}</a>
                  {% endif %}
                  {% endfor %}
               </div>
               <div class="mt-3 flex items-center gap-3 flex-col">
                  <a class="group inline-flex items-center w-full justify-center rounded-full py-3 px-4 text-sm  focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 bg-primary text-white hover:bg-slate-700 hover:text-slate-100 active:bg-slate-800 active:text-slate-300 focus-visible:outline-slate-900"
                     variant="solid" color="slate" href="{{site.baseurl}}contact-us.html">
                     {{site.data.shared.request_demo}} </a>
                  {% if page.header.nav.secondary_label %}
                  <a class="group inline-flex ring-1  w-full items-center justify-center rounded-full py-2 px-4 text-sm focus:outline-none ring-slate-200 text-slate-700 hover:text-slate-900 hover:ring-slate-300 active:bg-slate-100 active:text-slate-600 focus-visible:outline-blue-600 focus-visible:ring-slate-300"
                     variant="outline" color="slate" href="{{page.header.nav.secondary_url }}">
                     {{ page.header.nav.secondary_label}}
                  </a>
                  {% endif %}
               </div>

            </div>
         </div>
      </div>
   </div>
</header>